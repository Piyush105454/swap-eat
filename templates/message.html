<!DOCTYPE html>
<html>
<head>
    <title>Private Chat</title>
</head>
<body>
    <h2>Chat with {{ other_user }}</h2>
    <div id="chat-box"></div>
    <input id="chat-message-input" type="text">
    <button id="send-message">Send</button>

    <script>
        const username = "{{ request.user.username }}";
        const otherUser = "{{ other_user.username }}";
        const chatSocket = new WebSocket(
            "ws://" + window.location.host + "/ws/chat/" + otherUser + "/"
        );

        chatSocket.onmessage = function (event) {
            const data = JSON.parse(event.data);
            document.getElementById("chat-box").innerHTML += "<p>" + data.username + ": " + data.message + "</p>";
        };

        document.getElementById("send-message").onclick = function () {
            const messageInput = document.getElementById("chat-message-input");
            const message = messageInput.value;
            chatSocket.send(JSON.stringify({ message: message }));
            messageInput.value = "";
        };
    </script>
</body>
</html>
